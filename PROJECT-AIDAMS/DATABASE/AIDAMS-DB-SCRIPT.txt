CREATE TABLE ACCOUNT (
    ACC_ID SERIAL PRIMARY KEY,
    ACC_FNAME VARCHAR(50) NOT NULL,
    ACC_MNAME VARCHAR(50) NOT NULL,
    ACC_LNAME VARCHAR(50) NOT NULL,
    ACC_PASSWORD VARCHAR(50) NOT NULL,
    ACC_PROFILE BYTEA,
    ACC_CONTACT VARCHAR(11) NOT NULL,
    ACC_EMAIL VARCHAR(50) NOT NULL,
    ACC_TYPE VARCHAR(20) DEFAULT 'USER',
    ACC_STATUS VARCHAR(20) DEFAULT 'ACTIVE',
    DATE_CREATED DATE DEFAULT CURRENT_TIMESTAMP,
    DATE_UPDATED DATE DEFAULT CURRENT_TIMESTAMP,
    IS_SUBSCRIBE BOOL DEFAULT TRUE
);

CREATE TABLE DEVICE (
    DV_ID SERIAL PRIMARY KEY,
    DV_NAME VARCHAR(50) NOT NULL,
    DV_KEY VARCHAR(20) NOT NULL,
    DV_PASSWORD VARCHAR(50) NOT NULL,
    DV_STATUS BOOL DEFAULT TRUE,
    DV_AUTO_LOCK BOOL DEFAULT FALSE,
    DV_CURFEW BOOL DEFAULT FALSE,
    DV_AUTO_LOCK_TIME INT DEFAULT 15,
    DV_CURFEW_TIME TIME DEFAULT '11:00:00',
    DATE_CREATED DATE DEFAULT CURRENT_DATE,
    DATE_UPDATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ACC_ID INT,
    IS_OPEN_TOGGLED BOOL DEFAULT FALSE,
    IS_AUTO_LOCK_TOGGLED BOOL DEFAULT FALSE,
    IS_CURFEW_TOGGLE BOOL DEFAULT FALSE,
    FOREIGN KEY (ACC_ID) REFERENCES ACCOUNT(ACC_ID) ON UPDATE CASCADE
);

CREATE TABLE BLOC (
    BLC_ID SERIAL PRIMARY KEY,
    DATE_CREATED DATE DEFAULT CURRENT_TIMESTAMP,
    DATE_UPDATED DATE DEFAULT CURRENT_TIMESTAMP,
    ACC_ID INT UNIQUE,
    FOREIGN KEY (ACC_ID) REFERENCES ACCOUNT(ACC_ID) ON UPDATE CASCADE
);

CREATE TABLE BLC_MEMBER (
    BM_ID SERIAL PRIMARY KEY,
    DATE_CREATED DATE DEFAULT CURRENT_TIMESTAMP,
    DATE_UPDATED DATE DEFAULT CURRENT_TIMESTAMP,
    ACC_ID INT NOT NULL,
    BLC_ID INT NOT NULL,
    FOREIGN KEY (ACC_ID) REFERENCES ACCOUNT(ACC_ID) ON UPDATE CASCADE,
    FOREIGN KEY (BLC_ID) REFERENCES BLOC(BLC_ID) ON UPDATE CASCADE
);

CREATE TABLE HISTORY (
    HIS_ID SERIAL PRIMARY KEY,
    HIS_DV_STATUS BOOL DEFAULT TRUE,
    DATE_CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    DATE_UPDATED DATE DEFAULT CURRENT_TIMESTAMP,
    ACC_ID INT NOT NULL,
    DV_ID INT NOT NULL,
    FOREIGN KEY (ACC_ID) REFERENCES ACCOUNT(ACC_ID) ON UPDATE CASCADE,
    FOREIGN KEY (DV_ID) REFERENCES DEVICE(DV_ID) ON UPDATE CASCADE
);

CREATE TABLE NOTIFICATION (
    NTF_ID SERIAL PRIMARY KEY,
    NTF_TYPE VARCHAR(20) NOT NULL,
    NTF_MESSAGE VARCHAR(50) NOT NULL,
    DATE_CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    DATE_UPDATED DATE DEFAULT CURRENT_TIMESTAMP,
    DV_ID INT NOT NULL,
    FOREIGN KEY (DV_ID) REFERENCES DEVICE(DV_ID) ON UPDATE CASCADE
);
 